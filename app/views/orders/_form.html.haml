%div#content
  -# widget grid -->
  %section#widget-grid
    -# row -->
    %div.row
      -# NEW WIDGET START -->
      %article.col-xs-12.col-sm-12.col-md-12.col-lg-12
        -#- end widget -->
        -#- Widget ID (each widget will need unique ID)-->
        %div.jarviswidget.well#orderdetail{ "data-widget-togglebutton" => "false", "data-widget-editbutton" => "false", "data-widget-fullscreenbutton" => "false", "data-widget-colorbutton" => "false", "data-widget-deletebutton" => "false" }
          -# widget options:
          -#usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">
          -#data-widget-colorbutton="false"
          -#data-widget-editbutton="false"
          -#data-widget-togglebutton="false"
          -#data-widget-deletebutton="false"
          -#data-widget-fullscreenbutton="false"
          -#data-widget-custombutton="false"
          -#data-widget-collapsed="true"
          -#data-widget-sortable="false"
          %header
            %span.widget-icon
              %i.fa.fa-table
            %h2= "Contract: #{@order.contract.id} - Seller: #{@order.contract.seller.name} - Buyer: #{@order.contract.buyer.name}"

          -#- widget div-->
          %div
            -# widget edit box -->
            %div.jarviswidget-editbox
              -# This area used as dropdown edit box -->
            -#- end widget edit box -->
            -#- widget content -->
            %div.widget-body

              = bootstrap_form_for(@order, label_errors: true, remote: true) do |f|
                %ul.nav.nav-tabs.pull-right.in#order-tab-content
                  %li.active{ "role" => "presentation" }
                    %a{ "href" => "#items", "role" => "tab", "data-toggle" => "tab" }
                      Items
                  %li{ "role" => "presentation" }
                    %a{ "href" => "#commission", "role" => "tab", "data-toggle" => "tab" }
                      Commissions
                  %li{ "role" => "presentation" }
                    %a{ "href" => "#shipping-info", "role" => "tab", "data-toggle" => "tab" }
                      Shipping Info
                  %li{ "role" => "presentation" }
                    %a{ "href" => "#documents", "role" => "tab", "data-toggle" => "tab" }
                      Documents 
                  %li{ "role" => "presentation" }
                    %a{ "href" => "#consignee", "role" => "tab", "data-toggle" => "tab" }
                      Consignee
                  %li{ "role" => "presentation" }
                    %a{ "href" => "#invoice", "role" => "tab", "data-toggle" => "tab" }
                      Invoice
                %div.clearfix
                %div.well.well-sm.bg-color-darken.txt-color-white.no-border
                  = link_to edit_contract_path(@order.contract), remote: true, class: "btn btn-info" do 
                    %i.fa.fa-lg.fa-fw.fa-pencil-square-o
                    %span.menu-item-parent 
                      = "Contract - #{@order.contract.id}"

                  = button_tag(type: 'submit', class: "btn btn-primary") do
                    %i.fa.fa-lg.fa-fw.fa-save
                    %span Save
                  = link_to "Add Invoice", new_invoice_path(order_id: @order.id), remote: true
                  %span.text-muted.pull-right
                    %em= "Load #{@order.row_on_contract} of #{@order.contract.orders.count}"
                  = link_to shipping_report_path(@order, format: "pdf"), target: "_blank", class: "btn btn-default" do 
                    %i.fa.fa-lg.fa-fw.fa-file-pdf-o
                    %span.menu-item-parent Shipping Information

                %div#orderTab.tab-content.padding-10
                  %div#items.tab-pane.fade.active.in{ "role" => "tabpanel" }
                    %div.clearfix
                    %div.panel.panel-primary
                      %div.panel-heading 
                        Items
                      %table.table
                        %tbody
                      = f.fields_for :order_line_items do |builder|
                        = render 'order_line_item_fields', f: builder
                    = link_to_add_fields "Add Item", f, :order_line_items                                    
              
                  %div#commission.tab-pane.fade{ "role" => "tabpanel" }
                    %div.panel.panel-primary
                      %div.panel-heading 
                        Commissions
                    %div.clearfix

                    = f.fields_for :commissions do |builder|
                      = render 'commission_fields', f: builder
                    = link_to_add_fields "Add Item", f, :commissions
                  %div#invoice.tab-pane.fade{ "role" => "tabpanel" }
                    %div.clearfix

                    = render 'invoice'
                  %div#shipping-info.tab-pane{ "role" => "tabpanel" }
                    %div.clearfix

                    %div.panel.panel-primary
                      %div.panel-heading 
                        Order Details
                      = render 'order_fields', f: f

                  %div#documents.tab-pane{ "role" => "tabpanel" }
                    %div.clearfix

                    %div.panel.panel-primary
                      %div.panel-heading 
                        Documents
                      = render 'documents', f: f
                  %div#consignee.tab-pane.fade{ "role" => "tabpanel" }
                    %div.clearfix

                    %div.panel.panel-primary
                      %div.panel-heading 
                        Consignee
                      = render 'consignee', f: f